(function(){"use strict";var e={4380:function(e,o,t){var n=t(3751),r=t(641);function a(e,o,t,n,a,l){const s=(0,r.g2)("Header"),c=(0,r.g2)("Map");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(s),(0,r.bF)(c)],64)}const l=e=>((0,r.Qi)("data-v-61caa6d9"),e=e(),(0,r.jt)(),e),s=l((()=>(0,r.Lk)("link",{rel:"stylesheet",href:"https://unpkg.com/maplibre-gl@4.1.2/dist/maplibre-gl.css"},null,-1))),c={class:"flex align-center justify-space"},i=l((()=>(0,r.Lk)("div",{id:"map",class:"map w-1/2"},null,-1)));function u(e,o,t,n,a,l){const u=(0,r.g2)("Form");return(0,r.uX)(),(0,r.CE)(r.FK,null,[s,(0,r.Lk)("div",c,[i,(0,r.bF)(u,{onColorChanged:l.handleColorChanged,onOpacityChanged:l.handleOpacityChanged,onSelectedLayer:l.handleLayerChange,onExportGeometry:l.exportGeometry},null,8,["onColorChanged","onOpacityChanged","onSelectedLayer","onExportGeometry"])])],64)}t(4114);var d=t(6443),p=t.n(d),y=t(9886),f=t(33);const m={class:"flex flex-auto items-center justify-center"},h={class:"w=1/2"},g={class:"bg-white shadow rounded p-4 mb-4 border border-gray-300 border-opacity-50"},b={class:"mb-4"},k=(0,r.Lk)("label",{for:"layer",class:"block font-bold mb-1"},"Обери об'єкт",-1),v=(0,r.Lk)("option",{value:"markers"},"Маркери",-1),C=(0,r.Lk)("option",{value:"polygons"},"Полігони",-1),L=(0,r.Lk)("option",{value:"lines"},"Лінії",-1),w=[v,C,L],x={class:"mb-4"},O=(0,r.Lk)("label",{class:"block font-bold mb-1"},"Обери колір",-1),E={id:"swatches",class:"flex flex-wrap gap-2"},S=["onClick"],j={class:"mb-4"},P=(0,r.Lk)("label",{for:"default-range",class:"block font-bold mb-1"}," Прозорість ",-1);function G(e,o,t,a,l,s){return(0,r.uX)(),(0,r.CE)("div",m,[(0,r.Lk)("div",h,[(0,r.Lk)("div",g,[(0,r.Lk)("fieldset",b,[k,(0,r.bo)((0,r.Lk)("select",{id:"layer",name:"layer","onUpdate:modelValue":o[0]||(o[0]=e=>l.selectedLayer=e),class:"w-full border-2 border-gray-300 border-opacity-50 shadow-md p-1",onChange:o[1]||(o[1]=(...e)=>s.handleLayerChange&&s.handleLayerChange(...e))},w,544),[[n.u1,l.selectedLayer]])]),(0,r.Lk)("fieldset",x,[O,(0,r.Lk)("div",E,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.colors,(e=>((0,r.uX)(),(0,r.CE)("button",{key:e,style:(0,f.Tr)({backgroundColor:e}),onClick:o=>s.changeColor(e),class:"w-8 h-8 rounded-full focus:outline-none focus:shadow-outline hover:scale-110 transition duration-100"},null,12,S)))),128))])]),(0,r.Lk)("fieldset",j,[P,(0,r.bo)((0,r.Lk)("input",{id:"default-range",type:"range",value:"50","onUpdate:modelValue":o[2]||(o[2]=o=>e.opacityValue=o),min:"0",max:"100",onInput:o[3]||(o[3]=(...e)=>s.changeOpacity&&s.changeOpacity(...e)),class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"},null,544),[[n.Jo,e.opacityValue]])]),(0,r.Lk)("button",{class:"w-full bg-blue-400 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline hover:bg-blue-500",onClick:o[4]||(o[4]=(...e)=>s.exportGeometry&&s.exportGeometry(...e))}," Експортувати геометрію ")])])])}const F=["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026","#1a1a1a"];var T={name:"FormColorChange",data(){return{selectedLayer:"markers",colors:F,opacityValues:{markers:1,polygons:1,lines:1}}},methods:{changeColor(e){this.$emit("colorChanged",e)},changeOpacity(){const e=this.opacityValue/100;this.$emit("opacityChanged",e)},handleLayerChange(e){this.selectedLayer=e.target.value,this.$emit("selectedLayer",this.selectedLayer)},exportGeometry(){this.$emit("exportGeometry")}}},A=t(6262);const M=(0,A.A)(T,[["render",G]]);var V=M;function _(e,o,t){let n;switch(o){case"polygons":t.setPaintProperty("random-polygons","fill-color",e);break;case"markers":n=document.querySelectorAll(".maplibregl-marker"),n.forEach((o=>{const t=o.querySelector("g path");t&&t.setAttribute("fill",e)}));break;case"lines":t.setPaintProperty("route","line-color",e);break;default:console.error("Unknown layer:",o);break}}function q(e,o,t){let n;switch(o){case"polygons":t.setPaintProperty("random-polygons","fill-opacity",e);break;case"markers":n=document.querySelectorAll(".maplibregl-marker"),n.forEach((o=>{const t=o.querySelector("g");t&&t.setAttribute("fill-opacity",e)}));break;case"lines":t.setPaintProperty("route","line-opacity",e);break;default:console.error("Unknown layer:",o);break}}function I(e,o){o.layer=e}t(4603),t(7566),t(8721);function U(e){const o=e.getGeometry(),t="geometry.geojson",n=new Blob([JSON.stringify(o)],{type:"application/json"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download=t,r.click()}function X(e,o){const t={type:"GeometryCollection",features:[]},n=e.queryRenderedFeatures();return n.forEach((e=>{t.features.push(e.toJSON())})),o.forEach((e=>{const o={type:"Feature",geometry:{type:"Point",coordinates:e.getLngLat().toArray()},properties:{}};t.features.push(o)})),t}var J={container:"map",style:"https://api.maptiler.com/maps/basic-v2/style.json?key=RgIqaIwjGLwdCvpRWEY7",center:[30.5234,50.4501],zoom:11,attributionControl:!1};function R(e,o){const t=document.createElement("div");t.innerHTML=`\n      <div class="p-2 bg-white">\n        <h3 class="text-sm font-semibold">ID маркера: ${o}</h3>\n      </div>\n    `;const n=new(p().Popup)({offset:25,maxWidth:"none"}).setDOMContent(t);e.setPopup(n)}var $=JSON.parse('{"G":[[30.6905273,50.4915758],[30.6233513,50.5208757],[30.6620315,50.4716645],[30.6737774,50.4069022],[30.604108,50.397309],[30.572182,50.384592]]}'),H={name:"MapView",props:{msg:String},components:{Form:V},data(){return{map:null,markers:[],selectedColor:"",layer:"markers",geometry:{type:"GeometryCollection",features:[]}}},mounted(){const e=new(p().Map)({...J});e.on("load",(()=>{e.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:$.G}}}),e.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#1a1a1a","line-width":8}});const o=[29.465332,50.317408,30.981445,51.275662],t=y._eC(100,{bbox:o}),n=y.myJ(1,{bbox:o});t.features.forEach(((o,t)=>{const n=(new(p().Marker)).setLngLat(o.geometry.coordinates).addTo(e);R(n,t),this.markers.push(n)})),e.addSource("random-polygons",{type:"geojson",data:n}),e.addLayer({id:"random-polygons",type:"fill",source:"random-polygons",paint:{"fill-color":this.selectedColor||"#1a1a1a","fill-opacity":.5}})})),this.map=e},methods:{handleColorChanged(e){_(e,this.layer,this.map)},handleOpacityChanged(e){q(e,this.layer,this.map)},handleLayerChange(e){I(e,this)},exportGeometry(){U(this)},getGeometry(){return X(this.map,this.markers)}}};const K=(0,A.A)(H,[["render",u],["__scopeId","data-v-61caa6d9"]]);var N=K;const D={class:"shadow-md py-2 px-2 sm:px-10 bg-grey font-[sans-serif] min-h-[50px]"},W=(0,r.Lk)("h1",{class:"block font-bold text-lg"},"Мапа з геоданими",-1),z=[W];function B(e,o,t,n,a,l){return(0,r.uX)(),(0,r.CE)("header",D,z)}var Q={name:"PageHeader"};const Y=(0,A.A)(Q,[["render",B]]);var Z=Y,ee={name:"App",components:{Map:N,Header:Z}};const oe=(0,A.A)(ee,[["render",a]]);var te=oe;(0,n.Ef)(te).mount("#app")}},o={};function t(n){var r=o[n];if(void 0!==r)return r.exports;var a=o[n]={exports:{}};return e[n].call(a.exports,a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(o,n,r,a){if(!n){var l=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],a=e[u][2];for(var s=!0,c=0;c<n.length;c++)(!1&a||l>=a)&&Object.keys(t.O).every((function(e){return t.O[e](n[c])}))?n.splice(c--,1):(s=!1,a<l&&(l=a));if(s){e.splice(u--,1);var i=r();void 0!==i&&(o=i)}}return o}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,r,a]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(o){return 0===e[o]};var o=function(o,n){var r,a,l=n[0],s=n[1],c=n[2],i=0;if(l.some((function(o){return 0!==e[o]}))){for(r in s)t.o(s,r)&&(t.m[r]=s[r]);if(c)var u=c(t)}for(o&&o(n);i<l.length;i++)a=l[i],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(u)},n=self["webpackChunkmapTEST"]=self["webpackChunkmapTEST"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],(function(){return t(4380)}));n=t.O(n)})();
//# sourceMappingURL=app.379ed931.js.map